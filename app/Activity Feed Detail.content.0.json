{
    "type": "plugin.Discussions.Discussion",
    "config": {
        "width": 0,
        "constrainHeight": false,
        "height": 100,
        "inlineEditing": false,
        "inlineReply": false,
        "emptyMessage": "There are no events to display",
        "channel": "wabun",
        "resolveItemScript": "return new MockDataTypeItem({type:\"widget\", id:145});",
        "initialPostsScript": "return <?php \n\n $posts=($plugin=GetPlugin('Discussions'))->getPostsForItem(145, 'widget', 'wabun');\n if(empty($posts)){\n     \/\/$posts=array_map(function($p){\n     \/\/    $p->metadata=json_decode($p->metadata);\n     \/\/    return $p;\n     \/\/ }, $plugin->getDatabase()->getPosts(array('ORDER BY' => 'createdDate DESC')));\n     $posts=json_decode('[\n    {\n        \"id\": \"34\",\n        \"discussion\": \"246\",\n        \"text\": \"Your account was created\",\n        \"user\": \"'.GetClient()->getUserId().'\",\n        \"metadata\": {},\n        \"createdDate\": \"2014-12-18 22:41:28\",\n        \"modifiedDate\": \"2014-12-18 22:41:28\",\n        \"readAccess\": \"public\"\n    },\n    {\n        \"id\": \"33\",\n        \"discussion\": \"246\",\n        \"text\": \"You were added to the wabun tribal council team\",\n        \"user\": \"'.GetClient()->getUserId().'\",\n        \"metadata\": {\n            \"items\":[\n                {\"type\":\"ReferralManagement.team\", \"id\":1}\n                ]\n        },\n        \"createdDate\": \"2014-12-18 22:40:24\",\n        \"modifiedDate\": \"2014-12-18 22:40:24\",\n        \"readAccess\": \"public\"\n    },\n    {\n        \"id\": \"31\",\n        \"discussion\": \"245\",\n        \"text\": \"You created a new task\",\n        \"user\": \"0\",\n        \"metadata\": {\n            \"items\":[\n                {\"type\":\"Tasks.task\", \"id\":1}\n                ]\n        },\n        \"createdDate\": \"2014-12-18 22:25:24\",\n        \"modifiedDate\": \"2014-12-18 22:25:24\",\n        \"readAccess\": \"public\"\n    },\n    {\n        \"id\": \"30\",\n        \"discussion\": \"245\",\n        \"text\": \"You uploaded a file\",\n        \"user\": \"681\",\n        \"metadata\": {\n             \"items\":[\n                {\"type\":\"Filesystem.file\", \"id\":\"path\/to\/file\"}\n                ]\n            \n        },\n        \"createdDate\": \"2014-12-18 22:22:26\",\n        \"modifiedDate\": \"2014-12-18 22:22:26\",\n        \"readAccess\": \"public\"\n    },\n    {\n        \"id\": \"29\",\n        \"discussion\": \"245\",\n        \"text\": \"You created a new Proposal\",\n        \"user\": \"681\",\n        \"metadata\": {\n            \"items\":[\n                {\"type\":\"ReferralManagement.proposal\", \"id\":1}\n                ]\n        },\n        \"createdDate\": \"2014-12-18 22:22:24\",\n        \"modifiedDate\": \"2014-12-18 22:22:24\",\n        \"readAccess\": \"public\"\n    },\n    {\n        \"id\": \"28\",\n        \"discussion\": \"245\",\n        \"text\": \"test\",\n        \"user\": \"681\",\n        \"metadata\": {},\n        \"createdDate\": \"2014-12-18 22:22:20\",\n        \"modifiedDate\": \"2014-12-18 22:22:20\",\n        \"readAccess\": \"public\"\n    },\n    {\n        \"id\": \"27\",\n        \"discussion\": \"245\",\n        \"text\": \"test\",\n        \"user\": \"681\",\n        \"metadata\": {},\n        \"createdDate\": \"2014-12-18 22:22:18\",\n        \"modifiedDate\": \"2014-12-18 22:22:18\",\n        \"readAccess\": \"public\"\n    },\n    {\n        \"id\": \"26\",\n        \"discussion\": \"245\",\n        \"text\": \"test\",\n        \"user\": \"681\",\n        \"metadata\": {},\n        \"createdDate\": \"2014-12-18 22:22:16\",\n        \"modifiedDate\": \"2014-12-18 22:22:16\",\n        \"readAccess\": \"public\"\n    }]');\n     \n }\n \n echo json_encode($posts, JSON_PRETTY_PRINT);\n\n\n?>;",
        "namedView": "defaultPostDetail"
    }
}