{
    "type": "WizardScriptElement",
    "config": {
        "script": "var navigationController=new NavigationMenuModule({\n      \"Main\":[\n        {\n          html:\"Dashboard\",\n        },\n        {\n          html:\"Projects\",\n          formatEl:function(li){\n              ProjectTeam.CurrentTeam().runOnceOnLoad(function(team){\n                  \n                    var setCounter=function(){\n                        var l=team.getProposals().length;\n                        li.setAttribute('data-counter',l);\n                        if(l>0){\n                            li.addClass('has-items')\n                        }else{\n                            li.removeClass('has-items')\n                        }\n                    }\n                  \n                   setCounter();\n                   team.addEvent('addProposal', setCounter);\n                   team.addEvent('removeProposal', setCounter);\n                  \n              });\n             \n          }\n        },\n\n        {\n          html:\"Tasks\",\n          formatEl:function(li){\n              ProjectTeam.CurrentTeam().runOnceOnLoad(function(team){\n                  \n                    var setCounter=function(){\n                        var l=team.getTasks().length;\n                        li.setAttribute('data-counter',l);\n                        li.setAttribute('data-counter-complete',team.getTasks().filter(function(t){\n                            return t.isComplete();\n                        }).length+'\/'+l)\n                        \n                        if(l>0){\n                            li.addClass('has-items')\n                        }else{\n                            li.removeClass('has-items')\n                        }\n                    }\n                  \n                   setCounter();\n                   team.addEvent('addTask', setCounter);\n                   team.addEvent('removeTask', setCounter);\n                  \n              });\n             \n          }\n        },\n        {\n          html:\"Calendar\"\n        },\n        {\n          html:\"Activity\",\n        },\n        {\n          html:\"Map\",\n        }\n      ],\n      \"People\":[\n        {\n          html:\"Projects\",\n        },\n        {\n          html:\"Clients\",\n          \n        },\n        {\n          html:\"Users\",\n          formatEl:function(li){\n              ProjectTeam.CurrentTeam().runOnceOnLoad(function(team){\n                  \n                    var setCounter=function(){\n                        team.getUsers(function(users){\n                            var l=users.length;\n                            li.setAttribute('data-counter',l);\n                            if(l>0){\n                                li.addClass('has-items')\n                            }else{\n                                li.removeClass('has-items')\n                            }\n                        })\n                    }\n                  \n                   setCounter();\n                   team.addEvent('addUser', setCounter);\n                   team.addEvent('removeUser', setCounter);\n                  \n              });\n             \n          }\n        }\n      ],\n    \/\/   \"Accounting\":[\n    \/\/     {\n    \/\/       html:\"Documents\",\n    \/\/     },\n    \/\/     {\n    \/\/       html:\"Timesheet\",\n    \/\/     },\n    \/\/     {\n    \/\/       html:\"Reports\"\n    \/\/     }\n    \/\/   ] \n     \n      \"Community\":[\n        {\n          html:\"Cultural\",\n        },\n        {\n          html:\"Transportation\",\n        },\n        {\n          html:\"Habitation\"\n        },\n        {\n          html:\"Environmental\"\n        },\n        {\n          html:\"Subsistence\"\n        }\n      ],\n      \"Configuration\":[\n        {\n            html:\"Archive\"\n        },\n        {\n          html:\"Settings\",\n        },\n        {\n          html:\"Export\",\n          events:{\n                click:function(){\n                    \n                    \n                    var exportQuery=new AjaxControlQuery(CoreAjaxUrlRoot, 'export_proposals', {\n\t\t                'plugin': \"ReferralManagement\"\n\t\t                });\n    \t\t\t\t\/\/exportQuery.execute(); \/\/for testing.\n    \t\t\t\twindow.open(exportQuery.getUrl(true),'Download'); \n                }\n              \n          }\n        }\n      ]    \n        \n    },{\n        targetUIView:function(button, section, viewer){\n            return  viewer.getApplication().getChildView('content',0).getChildView('content',1);\n        },\n        templateView:function(button, section){\n            return button.view||(section.toLowerCase()+button.html+\"Detail\");\n        },\n        buttonClass:function(button, section){\n            return button[\"class\"]||(\"menu-\"+section.toLowerCase()+\"-\"+button.html.toLowerCase())\n        },\n        sectionClass:function(section){\n            return \"menu-\"+section.toLowerCase()\n        },\n        formatSectionLabel:function(section, labelEl){\n            if(section==='People'){\n                return 'Team';\n            }\n        },\n        initialView:{view:\"Dashboard\", section:\"Main\"}\n    });\n    \napplication.setNamedValue('navigationController', navigationController);\nreturn navigationController;",
        "identifier": "customScriptElement"
    }
}