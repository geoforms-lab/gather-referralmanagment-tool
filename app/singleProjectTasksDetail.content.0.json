{
    "type": "WizardScriptElement",
    "config": {
        "script": "\nvar modalButton;\nreturn [\n    new ModalFormButtonModule(application, new TaskItem(item),{\n        label:\"New Task\",\n        formName:\"taskForm\",\n        formOptions:{\n            template:\"form\"\n        },\n        hideText:true,\n        \"class\":\"inline-btn add primary-btn\"\n    }),\n    (modalButton=new ModalFormButtonModule(application, new MockDataTypeItem(),{\n        label:\"Add Default \"+item.getProjectType()+\" Tasks\",\n        formName:\"taskDefaultItems\",\n        formOptions:{\n            template:\"form\"\n        },\n        hideText:true,\n        \"class\":\"inline-btn add primary-btn\"\n    })).addEvent('show',function(){\n        var wizard=modalButton.getWizard();\n        wizard.addEvent('complete',function(){\n          \n          var data=wizard.getData(); \n          console.log(data);\n          \n          \n            var CreateDefaultTaskQuery = new Class({\n        \t\tExtends: AjaxControlQuery,\n        \t\tinitialize: function(data) {\n        \t\t\tthis.parent(CoreAjaxUrlRoot, 'create_default_tasks', Object.append({\n        \t\t\t\tplugin: 'ReferralManagement',\n        \t\t\t\t\"proposal\":item.getId()\n        \t\t\t}, (data || {})));\n        \t\t}\n    \t    });\n    \t    new CreateDefaultTaskQuery(data).addEvent(\"success\",function(resp){\n    \t       \n    \t        if(resp.tasksData){\n    \t            resp.tasksData.forEach(function(data){\n    \t                item.addTask(new TaskItem(item, data));\n    \t            })\n    \t        }\n    \t    }).execute();\n\n            \n        });\n    }),\n    \n    new ElementModule(\"label\",{html:\"Tasks\"}),\n    new ElementModule(\"div\",{\n        \"class\":\"task-subtext\",\n        html:item.getTasks().filter(function(t){return t.isComplete();}).length+'\/'+item.getTasks().length+' tasks complete, '+\n        (item.isOnSchedule()?'you\\'re on schedule':'<span class=\"warn\">your behind schedule<\/span>')\n        \n    })\n   \n];",
        "identifier": "customScriptElement"
    }
}