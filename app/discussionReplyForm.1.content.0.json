{
    "type": "FormTextDescriptionField",
    "config": {
        "label": "Comment",
        "message": "Type a message",
        "lines": 3,
        "mandatory": false,
        "showAudios": true,
        "showImages": true,
        "showDocuments": true,
        "showVideos": true,
        "className": "",
        "maxChars": 0,
        "showExpandInput": true,
        "toolbarPosition": "bottom",
        "textFormatScript": "",
        "mediaIconTint": "rgb(100, 149, 237)",
        "onRenderModuleFn": "module.runOnceOnLoad(function(){\n    \n    \n    var getDiscussion=function(){\n        \n        var discussion=module.getViewer()\n            .getUIView()\n            .getViewer()\n            .findChildViews(function(c){return c instanceof DiscussionModule})\n            .pop();\n        return discussion;\n    }\n    \n    var uitext=module.getTextField();\n    uitext.setValue('');\n    uitext.getInputElement().addClass('discussion-textbox');\n    \n    \n    \n   \n    \n    (new UITextFieldMediaSelection(uitext)).addToolbarBtn({\n        \"class\":\"send-btn\",\n        events:{\n            click:function(){\n                \n                var value=uitext.getValue();\n                value=value.trim();\n                uitext.setValue('');\n                if(value&&value!==\"\"){\n                    \n                    \/\/console.log(\"send \"+value);\n                    var discussion=getDiscussion();\n                    discussion.getDiscussion().post(value, function(success){\n                        \/\/console.log('success: '+(success?'true':'false'));  \n                        if(!success){\n                            alert('Something went wrong');\n                        }\n                    });\n                }\n                \n            },\n        }\n    });\n    \n    \n    \n    uitext.addEvent('onEnterKey',function(e){\n       if(!e.shiftKey){\n            var value=uitext.getValue();\n            value=value.trim();\n            uitext.setValue('');\n            if(value&&value!==\"\"){\n                \n                \/\/console.log(\"send \"+value);\n                var discussion=getDiscussion();\n                discussion.getDiscussion().post(value, function(success){\n                    \/\/console.log('success: '+(success?'true':'false'));  \n                    if(!success){\n                        alert('Something went wrong');\n                    }\n                });\n            }\n       }   \n    });\n    \n    uitext.addEvent('addMediaItem', function(fileInfo){\n        \n            \n        (new UITextFieldMediaSelection(uitext)).clear();\n        \n        var value=fileInfo.html;\n        value=value.trim();\n        if(value&&value!==\"\"){\n            \n            application.getDisplayController().displayPopoverForm(\n\t\t\t\t'discussionMediaPostForm', \n\t\t\t\t(new MockDataTypeItem({name:\"\"})).addEvent('save', function(){\n\t\t\t\t    \n\t\t\t\t    var discussion=getDiscussion();\n                    discussion.getDiscussion().post(value, function(success){\n                        \/\/console.log('success: '+(success?'true':'false'));  \n                        if(!success){\n                            alert('Something went wrong');\n                        }\n                    });    \n\t\t\t\t    \n\t\t\t\t}), \n\t\t\t\t{template:\"form\"}\n\t\t\t);\n            \n            \n            \n            \n        }\n        \n        \n    });\n    \n});"
    }
}